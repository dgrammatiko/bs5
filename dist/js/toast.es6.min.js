import t from"./dom/data.js";import e from"./dom/event-handler.js";import s from"./dom/manipulator.js";const i=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:s}=window.getComputedStyle(t);const i=Number.parseFloat(e),n=Number.parseFloat(s);return i||n?(e=e.split(",")[0],s=s.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(s))):0},n=(t,e)=>{let s=!1;const i=e+5;t.addEventListener("transitionend",(function e(){s=!0,t.removeEventListener("transitionend",e)})),setTimeout(()=>{s||(t=>{t.dispatchEvent(new Event("transitionend"))})(t)},i)};document.documentElement.dir;const o={animation:"boolean",autohide:"boolean",delay:"number"},a={animation:!0,autohide:!0,delay:5e3};class r extends class{constructor(e){e&&(this._element=e,t.setData(e,this.constructor.DATA_KEY,this))}dispose(){t.removeData(this._element,this.constructor.DATA_KEY),this._element=null}static getInstance(e){return t.getData(e,this.DATA_KEY)}static get VERSION(){return"5.0.0-beta1"}}{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._setListeners()}static get DefaultType(){return o}static get Default(){return a}static get DATA_KEY(){return"bs.toast"}show(){if(e.trigger(this._element,"show.bs.toast").defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");const t=()=>{this._element.classList.remove("showing"),this._element.classList.add("show"),e.trigger(this._element,"shown.bs.toast"),this._config.autohide&&(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))};if(this._element.classList.remove("hide"),this._element.offsetHeight,this._element.classList.add("showing"),this._config.animation){const s=i(this._element);e.one(this._element,"transitionend",t),n(this._element,s)}else t()}hide(){if(!this._element.classList.contains("show"))return;if(e.trigger(this._element,"hide.bs.toast").defaultPrevented)return;const t=()=>{this._element.classList.add("hide"),e.trigger(this._element,"hidden.bs.toast")};if(this._element.classList.remove("show"),this._config.animation){const s=i(this._element);e.one(this._element,"transitionend",t),n(this._element,s)}else t()}dispose(){this._clearTimeout(),this._element.classList.contains("show")&&this._element.classList.remove("show"),e.off(this._element,"click.dismiss.bs.toast"),super.dispose(),this._config=null}_getConfig(t){return((t,e,s)=>{Object.keys(s).forEach(t=>{const i=s[t],n=e[t],o=n&&((a=n)[0]||a).nodeType?"element":(t=>null==t?""+t:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase())(n);var a;if(!new RegExp(i).test(o))throw new Error("toast".toUpperCase()+": "+`Option "${t}" provided type "${o}" `+`but expected type "${i}".`)})})(0,t={...a,...s.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}},this.constructor.DefaultType),t}_setListeners(){e.on(this._element,"click.dismiss.bs.toast",'[data-bs-dismiss="toast"]',()=>this.hide())}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){let s=t.getData(this,"bs.toast");if(s||(s=new r(this,"object"==typeof e&&e)),"string"==typeof e){if(void 0===s[e])throw new TypeError(`No method named "${e}"`);s[e](this)}}))}}var l;l=()=>{const t=(()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null})();if(t){const e=t.fn.toast;t.fn.toast=r.jQueryInterface,t.fn.toast.Constructor=r,t.fn.toast.noConflict=()=>(t.fn.toast=e,r.jQueryInterface)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l(),window.Joomla=window.Joomla||{},window.Joomla.Bootstrap={},window.Joomla.Bootstrap.Toast=r;export default r;
